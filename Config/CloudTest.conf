#!MANAGED-CONFIG https://raw.githubusercontent.com/shenhix/xRuleList/x/Config/CloudTest.conf interval=86400 strict=true

[General]
# General
ipv6 = true
bypass-system = true
loglevel = notify
replica = false
allow-wifi-access = true
exclude-simple-hostnames = true
network-framework = false
tls-provider = default
use-default-policy-if-wifi-not-primary = false
internet-test-url = http://wifi.vivo.com.cn/generate_204
proxy-test-url = http://cp.cloudflare.com/generate_204
test-timeout = 5
show-error-page-for-reject = true
external-controller-access = mima@0.0.0.0:6170

# > TLS 引擎
tls-provider = openssl

# > 从 /etc/hosts 读取 DNS 记录
read-etc-hosts = true

#local
# > 允许 Wi-Fi 访问 (仅 macOS，若允许远程访问将「127.0.0.1」改为「0.0.0.0」)
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153
# > 允许 Wi-Fi 访问 (仅 iOS)
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153

# Advanced
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8, localhost, *.local, *.crashlytics.com
# tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12
# tun-included-routes = 192.168.1.12/32
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# > Always Real IP Hosts
always-real-ip = msftconnecttest.com, msftncsi.com, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com

# DNS
dns-server = system, 223.5.5.5, 223.6.6.6, 8.8.8.8, 8.8.4.4
geoip-maxmind-url = https://raw.githubusercontent.com/JMVoid/ipip2mmdb/release/Country.mmdb

# Others
// wifi-assist = true

[Replica]
hide-apple-request = true
hide-crashlytics-request = true
hide-udp = false
keyword-filter-type = false

[Proxy]
direct = direct

[Proxy Group]
Proxy = select, Auto, direct, Free, policy-path = node/My.list
Direct = select, direct, Free, Proxy
Reject = select, direct, REJECT-TINYGIF, REJECT
Apple = select, direct, Free, Proxy
Media = select, Proxy, Free , policy-path = node/My.list
Others = select, direct, Free, Proxy
Auto = ssid, default = Test, cellular = Free

Free = url-test, policy-path = node/Free.list , interval = 600s, tolerance = 100ms, timeout = 5s, evaluate-before-use = true
Test = url-test, policy-path = node/My.list

[Rule]
# 防止应用循环请求
IP-CIDR,0.0.0.0/32,REJECT,no-resolve
# 规则修正
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/Unbreak.list,DIRECT
# > 局域网地址
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list,DIRECT
# Special - Ihie1
RULE-SET,https://raw.githubusercontent.com/dler-io/Rules/master/Surge/Surge%203/Provider/Special.list,Direct
# Domestic - DivineEngine China 中国直连
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list,Direct


# 广告拦截
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/AdBlock.list,REJECT
# ADblock - - Ihie1
# RULE-SET,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Reject.list,Reject


# 国际媒体
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/Streaming.list,Media
# 港台番剧
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/StreamingSE.list,Media
# 国内媒体
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/StreamingCN.list,DIRECT
# 全球加速
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/Global.list,Proxy
# > 苹果服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,Apple
# > 全球加速
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_All_No_Resolve.list,Proxy
# Proxy - Ihie1 全球加速
RULE-SET,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Proxy.list,Proxy

# 特殊app
# 美团
DOMAIN-SUFFIX,d.meituan.net,DIRECT // Added for: route-stats.d.meituan.net:443
DOMAIN-SUFFIX,speedv6.m.jd.com,DIRECT // Added for: speedv6.m.jd.com:443
DOMAIN-SUFFIX,spotify.com,DIRECT
DOMAIN-SUFFIX,zhuishudashi.net,DIRECT // Added for: g-lens2.zhuishudashi.net:443
AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP
# 腾讯 WeChat
RULE-SET,https://github.com/NobyDa/Script/raw/master/Surge/WeChat.list,DIRECT

# X - 自己写的规则
RULE-SET,https://raw.githubusercontent.com/shenhix/xRuleList/x/RuleList/Direct.list,Direct
RULE-SET,https://raw.githubusercontent.com/shenhix/xRuleList/x/RuleList/Proxy.list,Proxy
RULE-SET,https://raw.githubusercontent.com/shenhix/xRuleList/x/RuleList/Reject.list,Reject
RULE-SET,https://raw.githubusercontent.com/shenhix/xRuleList/x/RuleList/Media.list,Media

// Lan 
RULE-SET,LAN,Direct
// Detect local network
GEOIP, CN, Direct
// Use Proxy for all others
FINAL, Others, dns-failed

[Host]
// custom host

[URL Rewrite]

// custom url rewrite
# tiktok

[Header Rewrite]

// custom header rewrite

[SSID Setting]
// custom ssid

[MITM]
skip-server-cert-verify = true
tcp-connection = false

# hostname = 

h2 = ture 
enable = true
ca-passphrase = XH72002
ca-p12 = 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
